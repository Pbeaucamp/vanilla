<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.4"?>
<plugin>
 <extension
       point="org.eclipse.ui.importWizards">
    <wizard
          class="bpm.vanilla.repository.ui.wizards.page.ExportObjectWizard"
          id="bpm.vanilla.repository.ui.importwizard"
          name="%wizard_import">
    </wizard>
 </extension>
 <extension
       point="org.eclipse.ui.exportWizards">
    <wizard
          class="bpm.vanilla.repository.ui.wizards.page.ExportObjectWizard"
          id="bpm.vanilla.repository.ui.exportwizard"
          name="%wizard_export">
    </wizard>
 </extension>
 <extension
       point="org.eclipse.ui.services">
    <sourceProvider
          provider="bpm.repository.ui.SessionSourceProvider">
       <variable
             name="bpm.repository.ui.connected"
             priorityLevel="workbench">
       </variable>
       <variable
             name="bpm.repository.ui.imported"
             priorityLevel="workbench">
       </variable>
       <variable
             name="bpm.repository.ui.checkedIn"
             priorityLevel="workbench">
       </variable>
       <variable
             name="bpm.repository.ui.modelOpened"
             priorityLevel="workbench">
       </variable>
    </sourceProvider>
 </extension>
 <extension
       point="org.eclipse.ui.commands">
    <category
          id="bpm.repository.ui.category"
          name="Repository">
    </category>
    <command
          categoryId="bpm.repository.ui.category"
          id="bpm.repository.ui.commands.connection"
          name="%action_connect">
    </command>
    <command
          categoryId="bpm.repository.ui.category"
          id="bpm.repository.ui.commands.disconnection"
          name="%action_disconnect">
    </command>
    <command
          categoryId="bpm.repository.ui.category"
          id="bpm.repository.ui.commands.checkin"
          name="Checkin">
    </command>
    <command
          categoryId="bpm.repository.ui.category"
          id="bpm.repository.ui.commands.export"
          name="%wizard_export">
    </command>
    <command
          id="bpm.repository.ui.commands.import"
          name="%wizard_import">
    </command>
    <command
          categoryId="%wizard_import"
          id="bpm.repository.ui.commands.update"
          name="Update Model">
    </command>
 </extension>
 <extension
       point="org.eclipse.ui.handlers">
    <handler
          class="bpm.vanilla.repository.ui.ConnectHandler"
          commandId="bpm.repository.ui.commands.connection">
       <enabledWhen>
          <with
                variable="bpm.repository.ui.connected">
             <equals
                   value="disabled">
             </equals>
          </with>
       </enabledWhen>
    </handler>
    <handler
          class="bpm.vanilla.repository.ui.DisconnectHandler"
          commandId="bpm.repository.ui.commands.disconnection">
       <enabledWhen>
          <with
                variable="bpm.repository.ui.connected">
             <equals
                   value="enabled">
             </equals>
          </with>
       </enabledWhen>
    </handler>
    <handler
          class="bpm.vanilla.repository.ui.CheckinHandler"
          commandId="bpm.repository.ui.commands.checkin">
       <enabledWhen>
          <and>
             <with
                   variable="bpm.repository.ui.connected">
                <equals
                      value="enabled">
                </equals>
             </with>
             <with
                   variable="bpm.repository.ui.checkedIn">
                <equals
                      value="enabled">
                </equals>
             </with>
          </and>
       </enabledWhen>
    </handler>
    <handler
          class="bpm.vanilla.repository.ui.ExportHandler"
          commandId="bpm.repository.ui.commands.export">
       <enabledWhen>
          <and>
             <with
                   variable="bpm.repository.ui.connected">
                <equals
                      value="enabled">
                </equals>
             </with>
             <with
                   variable="bpm.repository.ui.modelOpened">
                <equals
                      value="enabled">
                </equals>
             </with>
          </and>
       </enabledWhen>
    </handler>
    <handler
          class="bpm.vanilla.repository.ui.ImportHandler"
          commandId="bpm.repository.ui.commands.import">
       <enabledWhen>
          <with
                variable="bpm.repository.ui.connected">
             <equals
                   value="enabled">
             </equals>
          </with>
       </enabledWhen>
    </handler>
    <handler
          class="bpm.vanilla.repository.ui.UpdateHandler"
          commandId="bpm.repository.ui.commands.update">
       <enabledWhen>
          <and>
             <with
                   variable="bpm.repository.ui.connected">
                <equals
                      value="enabled">
                </equals>
             </with>
             <with
                   variable="bpm.repository.ui.imported">
                <equals
                      value="enabled">
                </equals>
             </with>
          </and>
       </enabledWhen>
    </handler>
 </extension>
 <extension
       point="org.eclipse.ui.menus">
    <menuContribution
          locationURI="menu:org.eclipse.ui.main.menu?before=help">
       <menu
             id="bpm.repository.ui.menu"
             label="%menu_repository">
          <command
                commandId="bpm.repository.ui.commands.connection"
                id="bpm.repository.ui.menu.connection"
                style="push">
          </command>
          <command
                commandId="bpm.repository.ui.commands.disconnection"
                id="bpm.repository.ui.menu.disconnection"
                style="push">
          </command>
          <separator
                name="bpm.repository.ui.separator2"
                visible="true">
          </separator>
          <command
                commandId="bpm.repository.ui.commands.export"
                id="bpm.repository.ui.menu.export"
                style="push">
          </command>
          <command
                commandId="bpm.repository.ui.commands.import"
                id="bpm.repository.ui.menu.import"
                style="push">
          </command>
          <command
                commandId="bpm.repository.ui.commands.update"
                id="bpm.repository.ui.menu.update"
                style="push">
          </command>
          <separator
                name="bpm.repository.ui.separator1">
          </separator>
          <command
                commandId="bpm.repository.ui.commands.checkin"
                id="bpm.repository.ui.menu.checkin"
                style="push">
          </command>
       </menu>
    </menuContribution>
    <menuContribution
          locationURI="toolbar:org.eclipse.ui.main.toolbar?after=additions">
       <toolbar
             id="bpm.repository.ui.toolbar1">
          <command
                commandId="bpm.repository.ui.commands.connection"
                id="bpm.repository.ui.menu.connection"
                style="push">
          </command>
          <command
                commandId="bpm.repository.ui.commands.disconnection"
                id="bpm.repository.ui.menu.disconnection"
                style="push">
          </command>
          <separator
                name="bpm.repository.ui.separator2"
                visible="true">
          </separator>
          <command
                commandId="bpm.repository.ui.commands.export"
                id="bpm.repository.ui.menu.export"
                style="push">
          </command>
          <command
                commandId="bpm.repository.ui.commands.import"
                id="bpm.repository.ui.menu.import"
                style="push">
          </command>
          <command
                commandId="bpm.repository.ui.commands.update"
                id="bpm.repository.ui.menu.update"
                style="push">
          </command>
          <command
                commandId="bpm.repository.ui.commands.checkin"
                id="bpm.repository.ui.menu.checkin"
                style="push">
          </command>
       </toolbar>
    </menuContribution>
 </extension>
 <extension
       point="org.eclipse.ui.commandImages">
    <image
          commandId="bpm.repository.ui.commands.connection"
          icon="src/bpm/vanilla/repository/ui/icons/repository.png">
    </image>
    <image
          commandId="bpm.repository.ui.commands.disconnection"
          icon="src/bpm/vanilla/repository/ui/icons/disconnect.png">
    </image>
    <image
          commandId="bpm.repository.ui.commands.checkin"
          icon="src/bpm/vanilla/repository/ui/icons/chekin.png">
    </image>
    <image
          commandId="bpm.repository.ui.commands.export"
          icon="src/bpm/vanilla/repository/ui/icons/export2.png">
    </image>
    <image
          commandId="bpm.repository.ui.commands.import"
          icon="src/bpm/vanilla/repository/ui/icons/import.png">
    </image>
    <image
          commandId="bpm.repository.ui.commands.update"
          icon="src/bpm/vanilla/repository/ui/icons/refresh.png">
    </image>
 </extension>
</plugin>
