<?xml version="1.0" encoding="UTF-8"?>
<project name="Assemble bpm.birt.vanilla.feature" default="main">
	<property name="archiveName" value="bpm.birt.vanilla.feature-${buildId}-linux.gtk.x86.zip"/>
	<property name="os" value="linux"/>
	<property name="ws" value="gtk"/>
	<property name="arch" value="x86"/>
	<property name="jarProcessor.sign" value="false"/>
	<property name="assemblyTempDir" value="${buildDirectory}/tmp"/>
	<property name="eclipse.base" value="${assemblyTempDir}/${collectingFolder}"/>
	<property name="eclipse.plugins" value="${eclipse.base}/plugins"/>
	<property name="eclipse.features" value="${eclipse.base}/features"/>
	<property name="archiveFullPath" value="${basedir}/${buildLabel}/${archiveName}"/>
	<property name="equinoxLauncherJar" value="C:\Softs\IDE\eclipse-rcp-galileo-SR2-win32\eclipse\plugins\org.eclipse.equinox.launcher_1.0.201.R35x_v20090715.jar"/>
	<property name="p2.build.repo" value="file:${buildDirectory}/buildRepo"/>
	<property name="genericTargets" value="${eclipse.pdebuild.scripts}//genericTargets.xml"/>
	<available property="customAssembly" file="${builder}/customAssembly.xml" value="${builder}/customAssembly.xml"/>
	<property name="p2.product.qualifier" value="201201111046"/>
	<property name="tarargs" value=""/>

	<macrodef name="customGather">
		<attribute name="dir" />
		<attribute name="propertyName" />
		<attribute name="propertyValue" />
		<attribute name="subFolder" />
		<attribute name="projectName" />
		<sequential>
			<ant antfile="build.xml" dir="@{dir}" target="gather.bin.parts">
				<property name="@{propertyName}" value="@{propertyValue}"/>
			</ant>
			<antcall target="customAssembly">
				<param name="target.folder" value="@{propertyValue}@{subFolder}"/>
				<param name="projectLocation" value="${basedir}/@{dir}"/>
				<param name="@{propertyName}" value="@{propertyValue}"/>
				<param name="customTarget" value="gather.bin.parts"/>
				<param name="projectName" value="@{projectName}"/>
			</antcall>
		</sequential>
	</macrodef>

	<!-- Beginning of the jarUp task -->
	<target name="jarUp" description="Create a jar from the given location.">
		<available property="${source}/${elementName}_exists" file="${source}/${elementName}"/>
		<available property="jaringManifest" file="${source}/${elementName}/META-INF/MANIFEST.MF"/>
		<condition property="jaringTask" value="jarIng" else="jarIng_NoManifest"		>
			<isset property="jaringManifest"/>
		</condition>
		<antcall target="${jaringTask}">
			<param name="source" value="${source}"/>
			<param name="elementName" value="${elementName}"/>
		</antcall>
	</target>

	<target name="jarIng" if="${source}/${elementName}_exists">
		<jar destfile="${source}/${elementName}.jar" basedir="${source}/${elementName}" manifest="${source}/${elementName}/META-INF/MANIFEST.MF" filesetmanifest="skip"/>
		<delete dir="${source}/${elementName}"/>
	</target>

	<target name="jarIng_NoManifest" if="${source}/${elementName}_exists">
		<jar destfile="${source}/${elementName}.jar" basedir="${source}/${elementName}" filesetmanifest="merge"/>
		<delete dir="${source}/${elementName}"/>
	</target>
	<!-- End of the jarUp task -->

	<!-- Beginning of the jar signing  target -->
	<target name="jarSigning" description="Sign a jar.">
		<antcall target="customAssembly">
			<param name="customTarget" value="pre.jarSigning"/>
		</antcall>
		<eclipse.jarProcessor sign="${jarProcessor.sign}" pack="${jarProcessor.pack200}" unsign="${jarProcessor.unsign}" jar="${source}/${elementName}.jar" alias="${sign.alias}" keystore="${sign.keystore}" storepass="${sign.storepass}" keypass="${sign.keypass}"/>
	</target>
	<!-- End of the jarUp task -->

	<target name="main">
		<condition property="pluginArchivePrefix" value="plugins">
			<equals arg1="${archivePrefix}"  arg2="" trim="true"/>
		</condition>
		<property name="pluginArchivePrefix" value="${archivePrefix}/plugins"/>

		<condition property="featureArchivePrefix" value="features">
			<equals arg1="${archivePrefix}"  arg2="" trim="true"/>
		</condition>
		<property name="featureArchivePrefix" value="${archivePrefix}/features"/>

		<dirname property="archiveParentFolder" file="${archiveFullPath}"/>
		<mkdir dir="${archiveParentFolder}"/>
		<mkdir dir="${assemblyTempDir}"/>
		<mkdir dir="${buildLabel}"/>

		<antcall target="gather.bin.parts"/>
		<antcall target="customAssembly">
			<param name="customTarget" value="post.gather.bin.parts"/>
		</antcall>

		<antcall target="jar.processing"/>

		<eclipse.brand root="${eclipse.base}/linux.gtk.x86/${collectingFolder}" icons="${launcherIcons}" name="${launcherName}" os="${os}"		/>
		<antcall target="generate.p2.metadata"/>

		<antcall target="assemble.archive"/>
		<antcall target="cleanup.assembly"/>
	</target>

	<target name="gather.bin.parts">
		<customGather dir="..\..\..\bpm.vanilla.map.core" projectName="bpm.vanilla.map.core_4.0.0" propertyName="destination.temp.folder" propertyValue="${eclipse.plugins}" subFolder="" />
		<customGather dir="..\..\..\bpm.birt.fusionmaps.core" projectName="bpm.birt.fusionmaps.core_4.0.0" propertyName="destination.temp.folder" propertyValue="${eclipse.plugins}" subFolder="" />
		<customGather dir="..\..\..\bpm.fasd.api" projectName="bpm.fasd.api_4.0.0.17" propertyName="destination.temp.folder" propertyValue="${eclipse.plugins}" subFolder="" />
		<customGather dir="..\..\..\bpm.inlinedatas.oda.driver.ui" projectName="bpm.inlinedatas.oda.driver.ui_3.4.0" propertyName="destination.temp.folder" propertyValue="${eclipse.plugins}" subFolder="" />
		<customGather dir="..\..\..\bpm.fwr.oda.ui" projectName="bpm.fwr.oda.ui_4.0.2" propertyName="destination.temp.folder" propertyValue="${eclipse.plugins}" subFolder="" />
		<customGather dir="..\..\..\bpm.listdata.oda.driver.ui" projectName="bpm.vanilla.listdata.oda.driver.ui_4.0.0" propertyName="destination.temp.folder" propertyValue="${eclipse.plugins}" subFolder="" />
		<customGather dir="..\..\..\bpm.fm.api" projectName="freemetrics_api_STD_4.0.0.2" propertyName="destination.temp.folder" propertyValue="${eclipse.plugins}" subFolder="" />
		<customGather dir="..\..\..\bpm.listdata.oda.driver" projectName="bpm.vanilla.listdata.oda.driver_4.0.0" propertyName="destination.temp.folder" propertyValue="${eclipse.plugins}" subFolder="" />
		<customGather dir="..\..\..\bpm.repository.api" projectName="repository_api_4.0.2.5" propertyName="destination.temp.folder" propertyValue="${eclipse.plugins}" subFolder="" />
		<customGather dir="..\..\..\bpm.studio.expressions.ui" projectName="bpm.studio.expressions.ui_3.4.0" propertyName="destination.temp.folder" propertyValue="${eclipse.plugins}" subFolder="" />
		<customGather dir="..\..\..\bpm.google.spreadsheet.oda.driver.runtime" projectName="bpm.google.spreadsheet.oda.driver.runtime_3.1.0.3" propertyName="destination.temp.folder" propertyValue="${eclipse.plugins}" subFolder="" />
		<customGather dir="..\..\..\bpm.metadata.birt.oda.ui.nl1" projectName="bpm.metadata.birt.oda.ui.nl1_4.0.0" propertyName="destination.temp.folder" propertyValue="${eclipse.plugins}" subFolder="" />
		<customGather dir="..\..\..\bpm.studio.expressions.core" projectName="bpm.studio.expressions.core_3.4.0" propertyName="destination.temp.folder" propertyValue="${eclipse.plugins}" subFolder="" />
		<customGather dir="..\..\..\bpm.csv.oda.runtime" projectName="bpm.csv.oda.runtime_4.0.0" propertyName="destination.temp.folder" propertyValue="${eclipse.plugins}" subFolder="" />
		<customGather dir="..\..\..\bpm.excel.oda.ui" projectName="bpm.excel.oda.ui_4.0.0" propertyName="destination.temp.folder" propertyValue="${eclipse.plugins}" subFolder="" />
		<customGather dir="..\..\..\bpm.birt.gmaps.core" projectName="bpm.birt.gmaps.core_4.0.0" propertyName="destination.temp.folder" propertyValue="${eclipse.plugins}" subFolder="" />
		<customGather dir="..\..\..\bpm.fwr.oda.runtime" projectName="bpm.fwr.oda.runtime_4.0.2" propertyName="destination.temp.folder" propertyValue="${eclipse.plugins}" subFolder="" />
		<customGather dir="..\..\..\bpm.csv.oda.ui" projectName="bpm.csv.oda.ui_4.0.0" propertyName="destination.temp.folder" propertyValue="${eclipse.plugins}" subFolder="" />
		<customGather dir="..\..\..\bpm.vanilla.platform.hibernate" projectName="bpm.vanilla.platform.hibernate_4.0.0.21" propertyName="destination.temp.folder" propertyValue="${eclipse.plugins}" subFolder="" />
		<customGather dir="..\..\..\bpm.google.spreadsheet.oda.driver.ui" projectName="bpm.google.spreadsheet.oda.driver.ui_3.4.0" propertyName="destination.temp.folder" propertyValue="${eclipse.plugins}" subFolder="" />
		<customGather dir="..\..\..\bpm.studio.jdbc.management" projectName="bpm.studio.jdbc.management_3.4.0.3" propertyName="destination.temp.folder" propertyValue="${eclipse.plugins}" subFolder="" />
		<customGather dir="..\..\..\bpm.dataprovider.odainput" projectName="bpm.dataprovider.odainput_4.0.1" propertyName="destination.temp.folder" propertyValue="${eclipse.plugins}" subFolder="" />
		<customGather dir="..\..\..\bpm.birt.fusioncharts.ui" projectName="bpm.birt.fusioncharts.ui_4.0.0" propertyName="destination.temp.folder" propertyValue="${eclipse.plugins}" subFolder="" />
		<customGather dir="..\..\..\bpm.birt.repository.contribution" projectName="bpm.metadata.birt.contribution_4.0.11" propertyName="destination.temp.folder" propertyValue="${eclipse.plugins}" subFolder="" />
		<customGather dir="..\..\..\bpm.inlinedatas.oda.driver.runtime" projectName="bpm.inlinedatas.oda.driver.runtime_3.4.0" propertyName="destination.temp.folder" propertyValue="${eclipse.plugins}" subFolder="" />
		<customGather dir="..\..\..\bpm.studio.jdbc.management.ui" projectName="bpm.studio.jdbc.management.ui_3.4.0.1" propertyName="destination.temp.folder" propertyValue="${eclipse.plugins}" subFolder="" />
		<customGather dir="..\..\..\bpm.fa.api" projectName="bpm.fa.api_4.0.1.5" propertyName="destination.temp.folder" propertyValue="${eclipse.plugins}" subFolder="" />
		<customGather dir="..\..\..\bpm.fm.oda.driver.ui" projectName="bpm.fm.oda.driver.ui_1.1.0" propertyName="destination.temp.folder" propertyValue="${eclipse.plugins}" subFolder="" />
		<customGather dir="..\..\..\bpm.metadata.oda.runtime" projectName="bpm.metadata.birt.oda.runtime_4.0.1.6" propertyName="destination.temp.folder" propertyValue="${eclipse.plugins}" subFolder="" />
		<customGather dir="..\..\..\bpm.metadata.api" projectName="bpm.metadata.api_4.0.1.4" propertyName="destination.temp.folder" propertyValue="${eclipse.plugins}" subFolder="" />
		<customGather dir="..\..\..\bpm.google.table.oda.driver.runtime" projectName="bpm.google.table.oda.driver.runtime_3.4.0" propertyName="destination.temp.folder" propertyValue="${eclipse.plugins}" subFolder="" />
		<customGather dir="..\..\..\bpm.metadata.oda.ui" projectName="bpm.metadata.birt.oda.ui_4.0.2" propertyName="destination.temp.folder" propertyValue="${eclipse.plugins}" subFolder="" />
		<customGather dir="..\..\..\bpm.excel.oda.runtime" projectName="bpm.excel.oda.runtime_4.0.0" propertyName="destination.temp.folder" propertyValue="${eclipse.plugins}" subFolder="" />
		<customGather dir="..\..\..\bpm.es.api" projectName="adminBIRepApi_4.0.1" propertyName="destination.temp.folder" propertyValue="${eclipse.plugins}" subFolder="" />
		<customGather dir="..\..\..\bpm.vanilla.oda.commons" projectName="bpm.vanilla.oda.commons_4.0.1" propertyName="destination.temp.folder" propertyValue="${eclipse.plugins}" subFolder="" />
		<customGather dir="..\..\..\bpm.fm.oda.driver" projectName="bpm.fm.oda.driver_3.4.0" propertyName="destination.temp.folder" propertyValue="${eclipse.plugins}" subFolder="" />
		<customGather dir="..\..\..\bpm.vanilla.map.remote" projectName="bpm.vanilla.map.remote_4.0.0" propertyName="destination.temp.folder" propertyValue="${eclipse.plugins}" subFolder="" />
		<customGather dir="..\..\..\bpm.birt.gmaps.ui" projectName="bpm.birt.gmaps.ui_4.0.0" propertyName="destination.temp.folder" propertyValue="${eclipse.plugins}" subFolder="" />
		<customGather dir="..\..\..\bpm.birt.fusionmaps.ui" projectName="bpm.birt.fusionmaps.ui_4.0.0" propertyName="destination.temp.folder" propertyValue="${eclipse.plugins}" subFolder="" />
		<customGather dir="..\..\..\bpm.log4j.fragment" projectName="bpm.log4j.fragment_1.1.0" propertyName="destination.temp.folder" propertyValue="${eclipse.plugins}" subFolder="" />
		<customGather dir="..\..\..\bpm.vanilla.platform.logging" projectName="bpm.vanilla.platform.logging_3.4.0" propertyName="destination.temp.folder" propertyValue="${eclipse.plugins}" subFolder="" />
		<customGather dir="..\..\..\bpm.google.table.oda.driver.ui" projectName="bpm.google.table.oda.driver.ui_3.4.0" propertyName="destination.temp.folder" propertyValue="${eclipse.plugins}" subFolder="" />
		<customGather dir="..\..\..\bpm.birt.fusioncharts.core" projectName="bpm.birt.fusioncharts.core_4.0.0" propertyName="destination.temp.folder" propertyValue="${eclipse.plugins}" subFolder="" />
		<customGather dir="..\..\..\bpm.united.olap.api" projectName="bpm.united.olap.api_4.0.1.1" propertyName="destination.temp.folder" propertyValue="${eclipse.plugins}" subFolder="" />
		<customGather dir="..\..\..\bpm.united.olap.remote" projectName="bpm.united.olap.remote_4.0.1.1" propertyName="destination.temp.folder" propertyValue="${eclipse.plugins}" subFolder="" />
		<customGather dir="..\..\..\bpm.vanilla.platform.core" projectName="bpm.vanilla.platform.core_1.0.3.1" propertyName="destination.temp.folder" propertyValue="${eclipse.plugins}" subFolder="" />
		<customGather dir="..\..\..\bpm.vanilla.platform.core.config" projectName="bpm.vanilla.platform.core.config_1.0.1" propertyName="destination.temp.folder" propertyValue="${eclipse.plugins}" subFolder="" />
		<customGather dir="..\..\..\bpm.vanilla.platform.core.remote" projectName="bpm.vanilla.platform.core.remote_1.1.13" propertyName="destination.temp.folder" propertyValue="${eclipse.plugins}" subFolder="" />
		<customGather dir="..\..\..\bpm.vanilla.platform.xstream" projectName="bpm.vanilla.platform.xstream_4.0.0.31" propertyName="destination.temp.folder" propertyValue="${eclipse.plugins}" subFolder="" />
		<customGather dir="..\..\..\bpm.fwr.api" projectName="bpm.fwr.api_4.0.0.41" propertyName="destination.temp.folder" propertyValue="${eclipse.plugins}" subFolder="" />
		<customGather dir="..\..\..\bpm.birt.vanilla.feature\" projectName="bpm.birt.vanilla.feature_1.0.0" propertyName="feature.base" propertyValue="${eclipse.base}" subFolder="/features" />
	</target>

	<target name="jar.processing">
		<antcall target="jarUp">
			<param name="source" value="${eclipse.plugins}"/>
			<param name="elementName" value="bpm.vanilla.map.core_4.0.0"/>
		</antcall>
		<antcall target="jarUp">
			<param name="source" value="${eclipse.plugins}"/>
			<param name="elementName" value="bpm.birt.fusionmaps.core_4.0.0"/>
		</antcall>
		<antcall target="jarUp">
			<param name="source" value="${eclipse.plugins}"/>
			<param name="elementName" value="bpm.fasd.api_4.0.0.17"/>
		</antcall>
		<antcall target="jarUp">
			<param name="source" value="${eclipse.plugins}"/>
			<param name="elementName" value="bpm.inlinedatas.oda.driver.ui_3.4.0"/>
		</antcall>
		<antcall target="jarUp">
			<param name="source" value="${eclipse.plugins}"/>
			<param name="elementName" value="bpm.fwr.oda.ui_4.0.2"/>
		</antcall>
		<antcall target="jarUp">
			<param name="source" value="${eclipse.plugins}"/>
			<param name="elementName" value="bpm.vanilla.listdata.oda.driver.ui_4.0.0"/>
		</antcall>
		<antcall target="jarUp">
			<param name="source" value="${eclipse.plugins}"/>
			<param name="elementName" value="freemetrics_api_STD_4.0.0.2"/>
		</antcall>
		<antcall target="jarUp">
			<param name="source" value="${eclipse.plugins}"/>
			<param name="elementName" value="bpm.vanilla.listdata.oda.driver_4.0.0"/>
		</antcall>
		<antcall target="jarUp">
			<param name="source" value="${eclipse.plugins}"/>
			<param name="elementName" value="repository_api_4.0.2.5"/>
		</antcall>
		<antcall target="jarUp">
			<param name="source" value="${eclipse.plugins}"/>
			<param name="elementName" value="bpm.studio.expressions.ui_3.4.0"/>
		</antcall>
		<antcall target="jarUp">
			<param name="source" value="${eclipse.plugins}"/>
			<param name="elementName" value="bpm.google.spreadsheet.oda.driver.runtime_3.1.0.3"/>
		</antcall>
		<antcall target="jarUp">
			<param name="source" value="${eclipse.plugins}"/>
			<param name="elementName" value="bpm.metadata.birt.oda.ui.nl1_4.0.0"/>
		</antcall>
		<antcall target="jarUp">
			<param name="source" value="${eclipse.plugins}"/>
			<param name="elementName" value="bpm.studio.expressions.core_3.4.0"/>
		</antcall>
		<antcall target="jarUp">
			<param name="source" value="${eclipse.plugins}"/>
			<param name="elementName" value="bpm.csv.oda.runtime_4.0.0"/>
		</antcall>
		<antcall target="jarUp">
			<param name="source" value="${eclipse.plugins}"/>
			<param name="elementName" value="bpm.excel.oda.ui_4.0.0"/>
		</antcall>
		<antcall target="jarUp">
			<param name="source" value="${eclipse.plugins}"/>
			<param name="elementName" value="bpm.birt.gmaps.core_4.0.0"/>
		</antcall>
		<antcall target="jarUp">
			<param name="source" value="${eclipse.plugins}"/>
			<param name="elementName" value="bpm.fwr.oda.runtime_4.0.2"/>
		</antcall>
		<antcall target="jarUp">
			<param name="source" value="${eclipse.plugins}"/>
			<param name="elementName" value="bpm.csv.oda.ui_4.0.0"/>
		</antcall>
		<antcall target="jarUp">
			<param name="source" value="${eclipse.plugins}"/>
			<param name="elementName" value="bpm.vanilla.platform.hibernate_4.0.0.21"/>
		</antcall>
		<antcall target="jarUp">
			<param name="source" value="${eclipse.plugins}"/>
			<param name="elementName" value="bpm.google.spreadsheet.oda.driver.ui_3.4.0"/>
		</antcall>
		<antcall target="jarUp">
			<param name="source" value="${eclipse.plugins}"/>
			<param name="elementName" value="bpm.studio.jdbc.management_3.4.0.3"/>
		</antcall>
		<antcall target="jarUp">
			<param name="source" value="${eclipse.plugins}"/>
			<param name="elementName" value="bpm.dataprovider.odainput_4.0.1"/>
		</antcall>
		<antcall target="jarUp">
			<param name="source" value="${eclipse.plugins}"/>
			<param name="elementName" value="bpm.birt.fusioncharts.ui_4.0.0"/>
		</antcall>
		<antcall target="jarUp">
			<param name="source" value="${eclipse.plugins}"/>
			<param name="elementName" value="bpm.metadata.birt.contribution_4.0.11"/>
		</antcall>
		<antcall target="jarUp">
			<param name="source" value="${eclipse.plugins}"/>
			<param name="elementName" value="bpm.inlinedatas.oda.driver.runtime_3.4.0"/>
		</antcall>
		<antcall target="jarUp">
			<param name="source" value="${eclipse.plugins}"/>
			<param name="elementName" value="bpm.studio.jdbc.management.ui_3.4.0.1"/>
		</antcall>
		<antcall target="jarUp">
			<param name="source" value="${eclipse.plugins}"/>
			<param name="elementName" value="bpm.fa.api_4.0.1.5"/>
		</antcall>
		<antcall target="jarUp">
			<param name="source" value="${eclipse.plugins}"/>
			<param name="elementName" value="bpm.fm.oda.driver.ui_1.1.0"/>
		</antcall>
		<antcall target="jarUp">
			<param name="source" value="${eclipse.plugins}"/>
			<param name="elementName" value="bpm.metadata.birt.oda.runtime_4.0.1.6"/>
		</antcall>
		<antcall target="jarUp">
			<param name="source" value="${eclipse.plugins}"/>
			<param name="elementName" value="bpm.metadata.api_4.0.1.4"/>
		</antcall>
		<antcall target="jarUp">
			<param name="source" value="${eclipse.plugins}"/>
			<param name="elementName" value="bpm.google.table.oda.driver.runtime_3.4.0"/>
		</antcall>
		<antcall target="jarUp">
			<param name="source" value="${eclipse.plugins}"/>
			<param name="elementName" value="bpm.metadata.birt.oda.ui_4.0.2"/>
		</antcall>
		<antcall target="jarUp">
			<param name="source" value="${eclipse.plugins}"/>
			<param name="elementName" value="bpm.excel.oda.runtime_4.0.0"/>
		</antcall>
		<antcall target="jarUp">
			<param name="source" value="${eclipse.plugins}"/>
			<param name="elementName" value="adminBIRepApi_4.0.1"/>
		</antcall>
		<antcall target="jarUp">
			<param name="source" value="${eclipse.plugins}"/>
			<param name="elementName" value="bpm.vanilla.oda.commons_4.0.1"/>
		</antcall>
		<antcall target="jarUp">
			<param name="source" value="${eclipse.plugins}"/>
			<param name="elementName" value="bpm.fm.oda.driver_3.4.0"/>
		</antcall>
		<antcall target="jarUp">
			<param name="source" value="${eclipse.plugins}"/>
			<param name="elementName" value="bpm.vanilla.map.remote_4.0.0"/>
		</antcall>
		<antcall target="jarUp">
			<param name="source" value="${eclipse.plugins}"/>
			<param name="elementName" value="bpm.birt.gmaps.ui_4.0.0"/>
		</antcall>
		<antcall target="jarUp">
			<param name="source" value="${eclipse.plugins}"/>
			<param name="elementName" value="bpm.birt.fusionmaps.ui_4.0.0"/>
		</antcall>
		<antcall target="jarUp">
			<param name="source" value="${eclipse.plugins}"/>
			<param name="elementName" value="bpm.log4j.fragment_1.1.0"/>
		</antcall>
		<antcall target="jarUp">
			<param name="source" value="${eclipse.plugins}"/>
			<param name="elementName" value="bpm.vanilla.platform.logging_3.4.0"/>
		</antcall>
		<antcall target="jarUp">
			<param name="source" value="${eclipse.plugins}"/>
			<param name="elementName" value="bpm.google.table.oda.driver.ui_3.4.0"/>
		</antcall>
		<antcall target="jarUp">
			<param name="source" value="${eclipse.plugins}"/>
			<param name="elementName" value="bpm.birt.fusioncharts.core_4.0.0"/>
		</antcall>
		<antcall target="jarUp">
			<param name="source" value="${eclipse.plugins}"/>
			<param name="elementName" value="bpm.united.olap.api_4.0.1.1"/>
		</antcall>
		<antcall target="jarUp">
			<param name="source" value="${eclipse.plugins}"/>
			<param name="elementName" value="bpm.united.olap.remote_4.0.1.1"/>
		</antcall>
		<antcall target="jarUp">
			<param name="source" value="${eclipse.plugins}"/>
			<param name="elementName" value="bpm.vanilla.platform.core_1.0.3.1"/>
		</antcall>
		<antcall target="jarUp">
			<param name="source" value="${eclipse.plugins}"/>
			<param name="elementName" value="bpm.vanilla.platform.core.config_1.0.1"/>
		</antcall>
		<antcall target="jarUp">
			<param name="source" value="${eclipse.plugins}"/>
			<param name="elementName" value="bpm.vanilla.platform.core.remote_1.1.13"/>
		</antcall>
		<antcall target="jarUp">
			<param name="source" value="${eclipse.plugins}"/>
			<param name="elementName" value="bpm.vanilla.platform.xstream_4.0.0.31"/>
		</antcall>
		<antcall target="jarUp">
			<param name="source" value="${eclipse.plugins}"/>
			<param name="elementName" value="bpm.fwr.api_4.0.0.41"/>
		</antcall>
		<antcall target="customAssembly">
			<param name="customTarget" value="post.jarUp"/>
		</antcall>
	</target>

	<target name="assemble.archive">
		<antcall target="customAssembly">
			<param name="rootFolder" value="${eclipse.base}/linux.gtk.x86/${collectingFolder}"/>
			<param name="customTarget" value="pre.archive"/>
		</antcall>
		<zip destfile="${archiveFullPath}" filesonly="false" whenempty="skip" update="true">
			<zipfileset file="${eclipse.base}/plugins/bpm.vanilla.map.core_4.0.0.jar" fullpath="${pluginArchivePrefix}/bpm.vanilla.map.core_4.0.0.jar"			/>
			<zipfileset file="${eclipse.base}/plugins/bpm.birt.fusionmaps.core_4.0.0.jar" fullpath="${pluginArchivePrefix}/bpm.birt.fusionmaps.core_4.0.0.jar"			/>
			<zipfileset file="${eclipse.base}/plugins/bpm.fasd.api_4.0.0.17.jar" fullpath="${pluginArchivePrefix}/bpm.fasd.api_4.0.0.17.jar"			/>
			<zipfileset file="${eclipse.base}/plugins/bpm.inlinedatas.oda.driver.ui_3.4.0.jar" fullpath="${pluginArchivePrefix}/bpm.inlinedatas.oda.driver.ui_3.4.0.jar"			/>
			<zipfileset file="${eclipse.base}/plugins/bpm.fwr.oda.ui_4.0.2.jar" fullpath="${pluginArchivePrefix}/bpm.fwr.oda.ui_4.0.2.jar"			/>
			<zipfileset file="${eclipse.base}/plugins/bpm.vanilla.listdata.oda.driver.ui_4.0.0.jar" fullpath="${pluginArchivePrefix}/bpm.vanilla.listdata.oda.driver.ui_4.0.0.jar"			/>
			<zipfileset file="${eclipse.base}/plugins/freemetrics_api_STD_4.0.0.2.jar" fullpath="${pluginArchivePrefix}/freemetrics_api_STD_4.0.0.2.jar"			/>
			<zipfileset file="${eclipse.base}/plugins/bpm.vanilla.listdata.oda.driver_4.0.0.jar" fullpath="${pluginArchivePrefix}/bpm.vanilla.listdata.oda.driver_4.0.0.jar"			/>
			<zipfileset file="${eclipse.base}/plugins/repository_api_4.0.2.5.jar" fullpath="${pluginArchivePrefix}/repository_api_4.0.2.5.jar"			/>
			<zipfileset file="${eclipse.base}/plugins/bpm.studio.expressions.ui_3.4.0.jar" fullpath="${pluginArchivePrefix}/bpm.studio.expressions.ui_3.4.0.jar"			/>
			<zipfileset file="${eclipse.base}/plugins/bpm.google.spreadsheet.oda.driver.runtime_3.1.0.3.jar" fullpath="${pluginArchivePrefix}/bpm.google.spreadsheet.oda.driver.runtime_3.1.0.3.jar"			/>
			<zipfileset file="${eclipse.base}/plugins/bpm.metadata.birt.oda.ui.nl1_4.0.0.jar" fullpath="${pluginArchivePrefix}/bpm.metadata.birt.oda.ui.nl1_4.0.0.jar"			/>
			<zipfileset file="${eclipse.base}/plugins/bpm.studio.expressions.core_3.4.0.jar" fullpath="${pluginArchivePrefix}/bpm.studio.expressions.core_3.4.0.jar"			/>
			<zipfileset file="${eclipse.base}/plugins/bpm.csv.oda.runtime_4.0.0.jar" fullpath="${pluginArchivePrefix}/bpm.csv.oda.runtime_4.0.0.jar"			/>
			<zipfileset file="${eclipse.base}/plugins/bpm.excel.oda.ui_4.0.0.jar" fullpath="${pluginArchivePrefix}/bpm.excel.oda.ui_4.0.0.jar"			/>
			<zipfileset file="${eclipse.base}/plugins/bpm.birt.gmaps.core_4.0.0.jar" fullpath="${pluginArchivePrefix}/bpm.birt.gmaps.core_4.0.0.jar"			/>
			<zipfileset file="${eclipse.base}/plugins/bpm.fwr.oda.runtime_4.0.2.jar" fullpath="${pluginArchivePrefix}/bpm.fwr.oda.runtime_4.0.2.jar"			/>
			<zipfileset file="${eclipse.base}/plugins/bpm.csv.oda.ui_4.0.0.jar" fullpath="${pluginArchivePrefix}/bpm.csv.oda.ui_4.0.0.jar"			/>
			<zipfileset file="${eclipse.base}/plugins/bpm.vanilla.platform.hibernate_4.0.0.21.jar" fullpath="${pluginArchivePrefix}/bpm.vanilla.platform.hibernate_4.0.0.21.jar"			/>
			<zipfileset file="${eclipse.base}/plugins/bpm.google.spreadsheet.oda.driver.ui_3.4.0.jar" fullpath="${pluginArchivePrefix}/bpm.google.spreadsheet.oda.driver.ui_3.4.0.jar"			/>
			<zipfileset file="${eclipse.base}/plugins/bpm.studio.jdbc.management_3.4.0.3.jar" fullpath="${pluginArchivePrefix}/bpm.studio.jdbc.management_3.4.0.3.jar"			/>
			<zipfileset file="${eclipse.base}/plugins/bpm.dataprovider.odainput_4.0.1.jar" fullpath="${pluginArchivePrefix}/bpm.dataprovider.odainput_4.0.1.jar"			/>
			<zipfileset file="${eclipse.base}/plugins/bpm.birt.fusioncharts.ui_4.0.0.jar" fullpath="${pluginArchivePrefix}/bpm.birt.fusioncharts.ui_4.0.0.jar"			/>
			<zipfileset file="${eclipse.base}/plugins/bpm.metadata.birt.contribution_4.0.11.jar" fullpath="${pluginArchivePrefix}/bpm.metadata.birt.contribution_4.0.11.jar"			/>
			<zipfileset file="${eclipse.base}/plugins/bpm.inlinedatas.oda.driver.runtime_3.4.0.jar" fullpath="${pluginArchivePrefix}/bpm.inlinedatas.oda.driver.runtime_3.4.0.jar"			/>
			<zipfileset file="${eclipse.base}/plugins/bpm.studio.jdbc.management.ui_3.4.0.1.jar" fullpath="${pluginArchivePrefix}/bpm.studio.jdbc.management.ui_3.4.0.1.jar"			/>
			<zipfileset file="${eclipse.base}/plugins/bpm.fa.api_4.0.1.5.jar" fullpath="${pluginArchivePrefix}/bpm.fa.api_4.0.1.5.jar"			/>
			<zipfileset file="${eclipse.base}/plugins/bpm.fm.oda.driver.ui_1.1.0.jar" fullpath="${pluginArchivePrefix}/bpm.fm.oda.driver.ui_1.1.0.jar"			/>
			<zipfileset file="${eclipse.base}/plugins/bpm.metadata.birt.oda.runtime_4.0.1.6.jar" fullpath="${pluginArchivePrefix}/bpm.metadata.birt.oda.runtime_4.0.1.6.jar"			/>
			<zipfileset file="${eclipse.base}/plugins/bpm.metadata.api_4.0.1.4.jar" fullpath="${pluginArchivePrefix}/bpm.metadata.api_4.0.1.4.jar"			/>
			<zipfileset file="${eclipse.base}/plugins/bpm.google.table.oda.driver.runtime_3.4.0.jar" fullpath="${pluginArchivePrefix}/bpm.google.table.oda.driver.runtime_3.4.0.jar"			/>
			<zipfileset file="${eclipse.base}/plugins/bpm.metadata.birt.oda.ui_4.0.2.jar" fullpath="${pluginArchivePrefix}/bpm.metadata.birt.oda.ui_4.0.2.jar"			/>
			<zipfileset file="${eclipse.base}/plugins/bpm.excel.oda.runtime_4.0.0.jar" fullpath="${pluginArchivePrefix}/bpm.excel.oda.runtime_4.0.0.jar"			/>
			<zipfileset file="${eclipse.base}/plugins/adminBIRepApi_4.0.1.jar" fullpath="${pluginArchivePrefix}/adminBIRepApi_4.0.1.jar"			/>
			<zipfileset file="${eclipse.base}/plugins/bpm.vanilla.oda.commons_4.0.1.jar" fullpath="${pluginArchivePrefix}/bpm.vanilla.oda.commons_4.0.1.jar"			/>
			<zipfileset file="${eclipse.base}/plugins/bpm.fm.oda.driver_3.4.0.jar" fullpath="${pluginArchivePrefix}/bpm.fm.oda.driver_3.4.0.jar"			/>
			<zipfileset file="${eclipse.base}/plugins/bpm.vanilla.map.remote_4.0.0.jar" fullpath="${pluginArchivePrefix}/bpm.vanilla.map.remote_4.0.0.jar"			/>
			<zipfileset file="${eclipse.base}/plugins/bpm.birt.gmaps.ui_4.0.0.jar" fullpath="${pluginArchivePrefix}/bpm.birt.gmaps.ui_4.0.0.jar"			/>
			<zipfileset file="${eclipse.base}/plugins/bpm.birt.fusionmaps.ui_4.0.0.jar" fullpath="${pluginArchivePrefix}/bpm.birt.fusionmaps.ui_4.0.0.jar"			/>
			<zipfileset file="${eclipse.base}/plugins/bpm.log4j.fragment_1.1.0.jar" fullpath="${pluginArchivePrefix}/bpm.log4j.fragment_1.1.0.jar"			/>
			<zipfileset file="${eclipse.base}/plugins/bpm.vanilla.platform.logging_3.4.0.jar" fullpath="${pluginArchivePrefix}/bpm.vanilla.platform.logging_3.4.0.jar"			/>
			<zipfileset file="${eclipse.base}/plugins/bpm.google.table.oda.driver.ui_3.4.0.jar" fullpath="${pluginArchivePrefix}/bpm.google.table.oda.driver.ui_3.4.0.jar"			/>
			<zipfileset file="${eclipse.base}/plugins/bpm.birt.fusioncharts.core_4.0.0.jar" fullpath="${pluginArchivePrefix}/bpm.birt.fusioncharts.core_4.0.0.jar"			/>
			<zipfileset file="${eclipse.base}/plugins/bpm.united.olap.api_4.0.1.1.jar" fullpath="${pluginArchivePrefix}/bpm.united.olap.api_4.0.1.1.jar"			/>
			<zipfileset file="${eclipse.base}/plugins/bpm.united.olap.remote_4.0.1.1.jar" fullpath="${pluginArchivePrefix}/bpm.united.olap.remote_4.0.1.1.jar"			/>
			<zipfileset file="${eclipse.base}/plugins/bpm.vanilla.platform.core_1.0.3.1.jar" fullpath="${pluginArchivePrefix}/bpm.vanilla.platform.core_1.0.3.1.jar"			/>
			<zipfileset file="${eclipse.base}/plugins/bpm.vanilla.platform.core.config_1.0.1.jar" fullpath="${pluginArchivePrefix}/bpm.vanilla.platform.core.config_1.0.1.jar"			/>
			<zipfileset file="${eclipse.base}/plugins/bpm.vanilla.platform.core.remote_1.1.13.jar" fullpath="${pluginArchivePrefix}/bpm.vanilla.platform.core.remote_1.1.13.jar"			/>
			<zipfileset file="${eclipse.base}/plugins/bpm.vanilla.platform.xstream_4.0.0.31.jar" fullpath="${pluginArchivePrefix}/bpm.vanilla.platform.xstream_4.0.0.31.jar"			/>
			<zipfileset file="${eclipse.base}/plugins/bpm.fwr.api_4.0.0.41.jar" fullpath="${pluginArchivePrefix}/bpm.fwr.api_4.0.0.41.jar"			/>
			<zipfileset dir="${eclipse.base}/linux.gtk.x86/${collectingFolder}" includes="**/**" excludes="" prefix="${archivePrefix}"			/>
		</zip>
	</target>

	<target name="cleanup.assembly">
		<delete dir="${assemblyTempDir}"/>
	</target>

	<target name="customAssembly" if="customAssembly">
		<ant antfile="${customAssembly}" target="${customTarget}" inheritAll="true"/>
	</target>

	<target name="generate.p2.metadata" if="generate.p2.metadata">
		<property name="p2.append" value="true"/>
		<property name="p2.compress" value="false"/>
		<property name="p2.metadata.repo.name" value=""/>
		<property name="p2.artifact.repo.name" value=""/>
		<p2.generator  source="${eclipse.base}" append="${p2.append}" flavor="${p2.flavor}" compress="${p2.compress}" metadataRepository="${p2.metadata.repo}" artifactRepository="${p2.artifact.repo}" metadataRepositoryName="${p2.metadata.repo.name}" artifactRepositoryName="${p2.artifact.repo.name}" publishArtifacts="${p2.publish.artifacts}" site="${p2.category.site}" p2OS="linux" mode="incremental"		/>
		<p2.generator  config="${eclipse.base}/linux.gtk.x86/${collectingFolder}" append="${p2.append}" flavor="${p2.flavor}" compress="${p2.compress}" metadataRepository="${p2.metadata.repo}" artifactRepository="${p2.artifact.repo}" metadataRepositoryName="${p2.metadata.repo.name}" artifactRepositoryName="${p2.artifact.repo.name}" launcherConfig="linux_gtk_x86" p2OS="linux" publishArtifacts="${p2.publish.artifacts}" mode="incremental"		/>
	</target>

	<target name="runDirector.condition">
		<condition property="runDirector.condition" value="true"		>
			<or>
				<isset property="runPackager"/>
				<isset property="skipDirector"/>
			</or>
		</condition>
	</target>
	<target name="runDirector" depends="runDirector.condition" unless="runDirector.condition">
		<ant antfile="${genericTargets}" target="runDirector" inheritAll="true">
			<property name="p2.director.installPath" value="${eclipse.base}"/>
			<property name="os" value="${os}"/>
			<property name="p2.director.version" value="${p2.root.version}"/>
			<property name="arch" value="${arch}"/>
			<property name="p2.director.iu" value="${p2.root.name}"/>
			<property name="ws" value="${ws}"/>
			<property name="p2.repo" value="${p2.build.repo}"/>
		</ant>

	</target>

</project>
